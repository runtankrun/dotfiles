#!/usr/bin/env sh
cd ${C_BDFR}

source ~/.scripts/system_exec/init.redhot 

# >>> conda initialize >>>
source "${HOME}"/.conda/init
conda activate bdfr
# <<< conda initialize <<<

case $1 in
    '')
        sub=$(ls ${C_BDFR}/fav | rofi -dmenu)
        srt=$(cat ${C_BDFR}/srt | rofi -dmenu)
        redhot -s $sub $srt
    ;;

    "-r"| "--refresh")
        RHQueryAllFiles 
    ;;

    "-d" | "--download")
        RHdownload $2
    ;;
    
    "-S" | "--search")
        query="$2"
        RHsearch
    ;;

    "-sl" | "--search-local")
        RHsearchLocal $2
    ;;

    "-s" | "--select")
        nohup mpv --playlist-start=0 $(RHQuerySub "$2" "$3")
        sleep 1s; RHCloseTerm
    ;;

    "-n" | "--notify")
        RHMPVNotify
    ;;
esac

