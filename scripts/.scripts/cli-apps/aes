#!/usr/bin/env sh
encrypt(){
    openssl enc -aes-256-cbc -a -A -md sha512 -pbkdf2 -iter 250000 -salt $@
}

decrypt(){
    openssl enc -aes-256-cbc -a -A -d -md sha512 -pbkdf2 -iter 250000 -salt $@
}

case $1 in
    "-e" | "-encrypt")
    
        case $2 in
            "-f" | "--file") 
                encrypt -in $3 -out encrypted.dat
            ;;
            "-C" | "--command")
                encrypt | xclip
            ;;
            "-c" |  "--clipboard")
                echo "$(xclip -out -selection primary)" | encrypt | xclip
            ;;
            "-s" | "--string")
                echo $3 | encrypt | xclip
            ;;
        esac
    ;;
    
    "-d" | "-decrypt")

        case $2 in
            "-f" | "--file")
                decrypt -in $3
            ;;
            "-c" | "--clipboard")     
                echo "$(xclip -out -selection primary)" | decrypt
            ;;
            "-s" | "--string")    
                echo $3 | decrypt
            ;;
        esac
    ;;

    "--generate-private-key")
        openssl genrsa -out private_key.pem 1024
    ;;

    "--extract-public-key")
        openssl rsa -in private_key.pem -out public_key.pem -outform PEM -pubout
    ;;
    
esac
